import streamlit as st
import pandas as pd
import numpy as np
from sklearn.datasets import load_iris
from sklearn.preprocessing import StandardScaler
import plotly.express as px

# Page Configuration
st.set_page_config(page_title="Iris Analysis", layout="wide")

# Title
st.title("ðŸŒ¸ Iris Flower Analysis")

# Load Dataset
@st.cache_data
def load_data():
    iris = load_iris()
    df = pd.DataFrame(iris.data, columns=iris.feature_names)
    df['species'] = iris.target_names[iris.target]
    return df

df = load_data()

# Sidebar Filters
st.sidebar.header("Filters")
selected_species = st.sidebar.multiselect(
    "Select Species:",
    options=df['species'].unique(),
    default=df['species'].unique()
)

filtered_df = df[df['species'].isin(selected_species)]

# Display Data
st.subheader("Dataset Overview")
st.dataframe(filtered_df, use_container_width=True)

# Visualizations
col1, col2 = st.columns(2)

with col1:
    st.subheader("Sepal Length vs Width")
    fig1 = px.scatter(filtered_df, x='sepal length (cm)', y='sepal width (cm)', 
                      color='species', title="Sepal Dimensions")
    st.plotly_chart(fig1, use_container_width=True)

with col2:
    st.subheader("Petal Length vs Width")
    fig2 = px.scatter(filtered_df, x='petal length (cm)', y='petal width (cm)', 
                      color='species', title="Petal Dimensions")
    st.plotly_chart(fig2, use_container_width=True)

# Statistics
st.subheader("Statistics")
st.write(filtered_df.describe())

# Create feature branch with download button (already in iris_analysis.py)
git checkout -b feature/add-download-button
git add iris_analysis.py
git commit -m "Add CSV download button feature"
git push origin feature/add-download-button
